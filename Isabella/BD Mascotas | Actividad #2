-- Crear BD Mascotas --

create database mascotas;
use mascotas;

-- Crear las tablas --

create Table Producto(
codigoProducto int Primary Key not null,
nombreProducto varchar(15),
marca varchar(15),
precio float,
cedulaClienteFK int(11)
);

create Table Cliente(
cedulaCliente int(11) Primary Key not null,
nombreCliente varchar(15),
appellidoCliente varchar(15),
direccionCliente varchar(10),
telefono int(10),
idMascotaFK int(11)
);

create Table Mascota(
idMascota int(11) Primary Key not null,
nombreMascota varchar(15),
generoMascota varchar(15),
razaMascota varchar(15),
cantidad int(10)
);

create Table Vacuna(
codigoVacuna int(11) Primary Key not null,
nombreVacuna varchar(15),
dosisVacuna int(10),
enfermedad varchar(15)
);

create Table mascota_vacuna(
codigoVacunaFK int(11),
idMascotaFK int(11),
enfermedadFK varchar(15) 
);

-- Relacionar tablas segun modelo --

alter table Producto
add constraint FKClienteProducto
foreign key (cedulaClienteFK)
references Cliente(cedulaCliente);

alter table Cliente
add constraint FKMascotaCliente
foreign key (idMascotaFK)
references Mascota(idMascota);

alter table mascota_vacuna
add constraint FKMascotaMascota_vacuna
foreign key (idMascotaFK)
references Mascota(idMascota);

-- Agregar campo en producto que se llame cantidad int obligatoria --
alter table Producto ADD column cantidad int not null;

-- Cambiar nombre en mascota cantidad por cantidadMascota --
alter table Mascota CHANGE column cantidad cantidadMascota int(10);

-- Cambiar combre de tabla de mascota_vacuna por detallevacuna --
alter table mascota_vacuna RENAME TO detalleVacuna;

alter table detalleVacuna
add constraint FKVacunaMascVac
foreign key (codigoVacunaFK)
references Vacuna(codigoVacuna);

-- Muestra la tabla con la informaci√≥n registrada --
select * from Mascota;
select * from Cliente;
select * from Vacuna;
select * from Producto;
select * from detalleVacuna;

-- Ver la estructura de la tabla --
describe Cliente;
describe Mascota;
describe Producto;
describe Vacuna;
describe detalleVacuna;

-- Agrega datos a una tabla --
insert into Mascota values(1,'Lucky','M','shitzu',1);
insert into Mascota values(2,'Martina','F','adoptadita',1),(3,'Blacky','M','criollito',1);
insert into Cliente values(1000940266,'Isabella','Posada','cll #123-45',3242591532,1),(1025322998,'Santiago','Gomez','cll #123-45',123456789,3); -- cambiar el formato del telefono a varchar --
insert into Producto values(1,'shampoo','pets',10500,1000940266,1);
insert into Producto values(3,'galletas','purina',15900,1000940266,2);
insert into Vacuna values(1,'Moquillo',1,'moquillo'),(2,'Parvovirus',1,'parvovirus');
insert into detalleVacuna values(1,1,'moquillo'),(2,2,'parvovirus');
